<!DOCTYPE html>

<html>
<head>
  <title>diet.jsx</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="..\..\..\..\docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="..\..\..\node_modules\hoist-non-react-statics\dist\hoist-non-react-statics.cjs.html">
                  zoo_frontend/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js
                </a>
              
                
                <a class="source" href="..\..\..\node_modules\hoist-non-react-statics\dist\hoist-non-react-statics.html">
                  zoo_frontend/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.js
                </a>
              
                
                <a class="source" href="..\..\..\node_modules\hoist-non-react-statics\dist\hoist-non-react-statics.min.html">
                  zoo_frontend/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.min.js
                </a>
              
                
                <a class="source" href="..\..\..\node_modules\hoist-non-react-statics\src\index.html">
                  zoo_frontend/node_modules/hoist-non-react-statics/src/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\_app.html">
                  zoo_frontend/pages/_app.jsx
                </a>
              
                
                <a class="source" href="..\..\..\pages\_document.html">
                  zoo_frontend/pages/_document.jsx
                </a>
              
                
                <a class="source" href="..\..\..\pages\admin\delivery-containers\index.html">
                  zoo_frontend/pages/admin/delivery-containers/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\admin\department\index.html">
                  zoo_frontend/pages/admin/department/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\admin\group-diets\index.html">
                  zoo_frontend/pages/admin/group-diets/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\admin\species\index.html">
                  zoo_frontend/pages/admin/species/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\admin\user\index.html">
                  zoo_frontend/pages/admin/user/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\diet\edit.html">
                  zoo_frontend/pages/diet/edit.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\diet\index.html">
                  zoo_frontend/pages/diet/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\diet\new.html">
                  zoo_frontend/pages/diet/new.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\dataSrc.html">
                  zoo_frontend/pages/food/dataSrc.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\edit.html">
                  zoo_frontend/pages/food/edit.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\index.html">
                  zoo_frontend/pages/food/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\new.html">
                  zoo_frontend/pages/food/new.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\nicknames.html">
                  zoo_frontend/pages/food/nicknames.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\nutrDef.html">
                  zoo_frontend/pages/food/nutrDef.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\food\units.html">
                  zoo_frontend/pages/food/units.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\home\index.html">
                  zoo_frontend/pages/home/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\index.html">
                  zoo_frontend/pages/index.jsx
                </a>
              
                
                <a class="source" href="..\..\..\pages\kitchen\index.html">
                  zoo_frontend/pages/kitchen/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\kitchen\prep\index.html">
                  zoo_frontend/pages/kitchen/prep/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\login\index.html">
                  zoo_frontend/pages/login/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\nutritionist\index.html">
                  zoo_frontend/pages/nutritionist/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\print\bin-label.html">
                  zoo_frontend/pages/print/bin-label.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\print\index.html">
                  zoo_frontend/pages/print/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\print\labels.html">
                  zoo_frontend/pages/print/labels.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\print\prep-sheet.html">
                  zoo_frontend/pages/print/prep-sheet.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\profile\index.html">
                  zoo_frontend/pages/profile/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\reports\cost-by-gl-code.html">
                  zoo_frontend/pages/reports/cost-by-gl-code.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\reports\dept-cards.html">
                  zoo_frontend/pages/reports/dept-cards.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\reports\dept-keeper-cards.html">
                  zoo_frontend/pages/reports/dept-keeper-cards.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\reports\feeding-cost.html">
                  zoo_frontend/pages/reports/feeding-cost.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\reports\index.html">
                  zoo_frontend/pages/reports/index.js
                </a>
              
                
                <a class="source" href="..\..\..\pages\reports\prep-cards-table.html">
                  zoo_frontend/pages/reports/prep-cards-table.js
                </a>
              
                
                <a class="source" href="..\..\api\Animals.html">
                  zoo_frontend/src/api/Animals.js
                </a>
              
                
                <a class="source" href="..\..\api\Api.html">
                  zoo_frontend/src/api/Api.js
                </a>
              
                
                <a class="source" href="..\..\api\BudgetIds.html">
                  zoo_frontend/src/api/BudgetIds.js
                </a>
              
                
                <a class="source" href="..\..\api\CaseNotes.html">
                  zoo_frontend/src/api/CaseNotes.js
                </a>
              
                
                <a class="source" href="..\..\api\DataSrc.html">
                  zoo_frontend/src/api/DataSrc.js
                </a>
              
                
                <a class="source" href="..\..\api\DeliveryContainers.html">
                  zoo_frontend/src/api/DeliveryContainers.js
                </a>
              
                
                <a class="source" href="..\..\api\Departments.html">
                  zoo_frontend/src/api/Departments.js
                </a>
              
                
                <a class="source" href="..\..\api\DietChanges.html">
                  zoo_frontend/src/api/DietChanges.js
                </a>
              
                
                <a class="source" href="..\..\api\DietHistory.html">
                  zoo_frontend/src/api/DietHistory.js
                </a>
              
                
                <a class="source" href="..\..\api\DietPlans.html">
                  zoo_frontend/src/api/DietPlans.js
                </a>
              
                
                <a class="source" href="..\..\api\Diets.html">
                  zoo_frontend/src/api/Diets.js
                </a>
              
                
                <a class="source" href="..\..\api\Food.html">
                  zoo_frontend/src/api/Food.js
                </a>
              
                
                <a class="source" href="..\..\api\FoodCategories.html">
                  zoo_frontend/src/api/FoodCategories.js
                </a>
              
                
                <a class="source" href="..\..\api\FoodPrepTables.html">
                  zoo_frontend/src/api/FoodPrepTables.js
                </a>
              
                
                <a class="source" href="..\..\api\FoodWeights.html">
                  zoo_frontend/src/api/FoodWeights.js
                </a>
              
                
                <a class="source" href="..\..\api\LifeStages.html">
                  zoo_frontend/src/api/LifeStages.js
                </a>
              
                
                <a class="source" href="..\..\api\Locations.html">
                  zoo_frontend/src/api/Locations.js
                </a>
              
                
                <a class="source" href="..\..\api\NutData.html">
                  zoo_frontend/src/api/NutData.js
                </a>
              
                
                <a class="source" href="..\..\api\NutrDef.html">
                  zoo_frontend/src/api/NutrDef.js
                </a>
              
                
                <a class="source" href="..\..\api\PrepNotes.html">
                  zoo_frontend/src/api/PrepNotes.js
                </a>
              
                
                <a class="source" href="..\..\api\RoleMappings.html">
                  zoo_frontend/src/api/RoleMappings.js
                </a>
              
                
                <a class="source" href="..\..\api\Roles.html">
                  zoo_frontend/src/api/Roles.js
                </a>
              
                
                <a class="source" href="..\..\api\Species.html">
                  zoo_frontend/src/api/Species.js
                </a>
              
                
                <a class="source" href="..\..\api\Subenclosures.html">
                  zoo_frontend/src/api/Subenclosures.js
                </a>
              
                
                <a class="source" href="..\..\api\Units.html">
                  zoo_frontend/src/api/Units.js
                </a>
              
                
                <a class="source" href="..\..\api\Users.html">
                  zoo_frontend/src/api/Users.js
                </a>
              
                
                <a class="source" href="..\..\api\index.html">
                  zoo_frontend/src/api/index.js
                </a>
              
                
                <a class="source" href="..\..\components\ConfirmationDialog.html">
                  zoo_frontend/src/components/ConfirmationDialog.jsx
                </a>
              
                
                <a class="source" href="..\..\components\ErrorPage.html">
                  zoo_frontend/src/components/ErrorPage.jsx
                </a>
              
                
                <a class="source" href="..\..\components\FormCheckbox.html">
                  zoo_frontend/src/components/FormCheckbox.jsx
                </a>
              
                
                <a class="source" href="..\..\components\Header.html">
                  zoo_frontend/src/components/Header.jsx
                </a>
              
                
                <a class="source" href="..\..\components\KitchenView.html">
                  zoo_frontend/src/components/KitchenView.jsx
                </a>
              
                
                <a class="source" href="..\..\components\Notifications.html">
                  zoo_frontend/src/components/Notifications.jsx
                </a>
              
                
                <a class="source" href="..\..\components\PrintPrepSheets\PrepSheetPrintOut.html">
                  zoo_frontend/src/components/PrintPrepSheets/PrepSheetPrintOut.jsx
                </a>
              
                
                <a class="source" href="..\..\components\PrintPrepSheets\PrintPrepSheets.html">
                  zoo_frontend/src/components/PrintPrepSheets/PrintPrepSheets.jsx
                </a>
              
                
                <a class="source" href="..\..\components\PrintPrepSheets\index.html">
                  zoo_frontend/src/components/PrintPrepSheets/index.js
                </a>
              
                
                <a class="source" href="..\..\components\ReactSingleSelect.html">
                  zoo_frontend/src/components/ReactSingleSelect.jsx
                </a>
              
                
                <a class="source" href="..\..\components\SidebarDrawer.html">
                  zoo_frontend/src/components/SidebarDrawer.jsx
                </a>
              
                
                <a class="source" href="..\..\components\VirtualTable.html">
                  zoo_frontend/src/components/VirtualTable.jsx
                </a>
              
                
                <a class="source" href="..\..\components\index.html">
                  zoo_frontend/src/components/index.js
                </a>
              
                
                <a class="source" href="..\..\getPageContext.html">
                  zoo_frontend/src/getPageContext.js
                </a>
              
                
                <a class="source" href="..\PageAccess.html">
                  zoo_frontend/src/pages/PageAccess.js
                </a>
              
                
                <a class="source" href="..\admin\deliveryContainers\deliveryContainers.html">
                  zoo_frontend/src/pages/admin/deliveryContainers/deliveryContainers.jsx
                </a>
              
                
                <a class="source" href="..\admin\deliveryContainers\deliveryContainers.styles.html">
                  zoo_frontend/src/pages/admin/deliveryContainers/deliveryContainers.styles.js
                </a>
              
                
                <a class="source" href="..\admin\deliveryContainers\index.html">
                  zoo_frontend/src/pages/admin/deliveryContainers/index.js
                </a>
              
                
                <a class="source" href="..\admin\department\department.html">
                  zoo_frontend/src/pages/admin/department/department.jsx
                </a>
              
                
                <a class="source" href="..\admin\department\department.styles.html">
                  zoo_frontend/src/pages/admin/department/department.styles.js
                </a>
              
                
                <a class="source" href="..\admin\department\index.html">
                  zoo_frontend/src/pages/admin/department/index.js
                </a>
              
                
                <a class="source" href="..\admin\groupDiets\groupDiets.html">
                  zoo_frontend/src/pages/admin/groupDiets/groupDiets.jsx
                </a>
              
                
                <a class="source" href="..\admin\groupDiets\groupDiets.styles.html">
                  zoo_frontend/src/pages/admin/groupDiets/groupDiets.styles.js
                </a>
              
                
                <a class="source" href="..\admin\groupDiets\index.html">
                  zoo_frontend/src/pages/admin/groupDiets/index.js
                </a>
              
                
                <a class="source" href="..\admin\species\index.html">
                  zoo_frontend/src/pages/admin/species/index.js
                </a>
              
                
                <a class="source" href="..\admin\species\species.html">
                  zoo_frontend/src/pages/admin/species/species.jsx
                </a>
              
                
                <a class="source" href="..\admin\species\species.styles.html">
                  zoo_frontend/src/pages/admin/species/species.styles.js
                </a>
              
                
                <a class="source" href="..\admin\user\index.html">
                  zoo_frontend/src/pages/admin/user/index.js
                </a>
              
                
                <a class="source" href="..\admin\user\user.html">
                  zoo_frontend/src/pages/admin/user/user.jsx
                </a>
              
                
                <a class="source" href="..\admin\user\user.styles.html">
                  zoo_frontend/src/pages/admin/user/user.styles.js
                </a>
              
                
                <a class="source" href="CaseNotesForm.html">
                  zoo_frontend/src/pages/diet/CaseNotesForm.jsx
                </a>
              
                
                <a class="source" href="CurrentDiet.html">
                  zoo_frontend/src/pages/diet/CurrentDiet.jsx
                </a>
              
                
                <a class="source" href="DietChangeCard.html">
                  zoo_frontend/src/pages/diet/DietChangeCard.jsx
                </a>
              
                
                <a class="source" href="DietHistory.html">
                  zoo_frontend/src/pages/diet/DietHistory.jsx
                </a>
              
                
                <a class="source" href="DietPlanChangeDialog.html">
                  zoo_frontend/src/pages/diet/DietPlanChangeDialog.jsx
                </a>
              
                
                <a class="source" href="DietSelectDialog.html">
                  zoo_frontend/src/pages/diet/DietSelectDialog.jsx
                </a>
              
                
                <a class="source" href="diet.html">
                  zoo_frontend/src/pages/diet/diet.jsx
                </a>
              
                
                <a class="source" href="diet.styles.html">
                  zoo_frontend/src/pages/diet/diet.styles.js
                </a>
              
                
                <a class="source" href="dietForm.html">
                  zoo_frontend/src/pages/diet/dietForm.jsx
                </a>
              
                
                <a class="source" href="dietHistoryList.html">
                  zoo_frontend/src/pages/diet/dietHistoryList.jsx
                </a>
              
                
                <a class="source" href="edit\edit.html">
                  zoo_frontend/src/pages/diet/edit/edit.jsx
                </a>
              
                
                <a class="source" href="edit\edit.styles.html">
                  zoo_frontend/src/pages/diet/edit/edit.styles.js
                </a>
              
                
                <a class="source" href="edit\index.html">
                  zoo_frontend/src/pages/diet/edit/index.js
                </a>
              
                
                <a class="source" href="index.html">
                  zoo_frontend/src/pages/diet/index.js
                </a>
              
                
                <a class="source" href="new\index.html">
                  zoo_frontend/src/pages/diet/new/index.js
                </a>
              
                
                <a class="source" href="new\new.html">
                  zoo_frontend/src/pages/diet/new/new.jsx
                </a>
              
                
                <a class="source" href="new\new.styles.html">
                  zoo_frontend/src/pages/diet/new/new.styles.js
                </a>
              
                
                <a class="source" href="prepNotesForm.html">
                  zoo_frontend/src/pages/diet/prepNotesForm.jsx
                </a>
              
                
                <a class="source" href="..\food\dataSrc\dataSrc.html">
                  zoo_frontend/src/pages/food/dataSrc/dataSrc.jsx
                </a>
              
                
                <a class="source" href="..\food\dataSrc\dataSrc.styles.html">
                  zoo_frontend/src/pages/food/dataSrc/dataSrc.styles.js
                </a>
              
                
                <a class="source" href="..\food\dataSrc\index.html">
                  zoo_frontend/src/pages/food/dataSrc/index.js
                </a>
              
                
                <a class="source" href="..\food\edit\FoodWeightTable.html">
                  zoo_frontend/src/pages/food/edit/FoodWeightTable.jsx
                </a>
              
                
                <a class="source" href="..\food\edit\edit.html">
                  zoo_frontend/src/pages/food/edit/edit.jsx
                </a>
              
                
                <a class="source" href="..\food\edit\edit.styles.html">
                  zoo_frontend/src/pages/food/edit/edit.styles.js
                </a>
              
                
                <a class="source" href="..\food\edit\index.html">
                  zoo_frontend/src/pages/food/edit/index.js
                </a>
              
                
                <a class="source" href="..\food\food.html">
                  zoo_frontend/src/pages/food/food.jsx
                </a>
              
                
                <a class="source" href="..\food\food.styles.html">
                  zoo_frontend/src/pages/food/food.styles.js
                </a>
              
                
                <a class="source" href="..\food\foodForm.html">
                  zoo_frontend/src/pages/food/foodForm.jsx
                </a>
              
                
                <a class="source" href="..\food\index.html">
                  zoo_frontend/src/pages/food/index.js
                </a>
              
                
                <a class="source" href="..\food\new\index.html">
                  zoo_frontend/src/pages/food/new/index.js
                </a>
              
                
                <a class="source" href="..\food\new\new.html">
                  zoo_frontend/src/pages/food/new/new.jsx
                </a>
              
                
                <a class="source" href="..\food\new\new.styles.html">
                  zoo_frontend/src/pages/food/new/new.styles.js
                </a>
              
                
                <a class="source" href="..\food\nicknames\index.html">
                  zoo_frontend/src/pages/food/nicknames/index.js
                </a>
              
                
                <a class="source" href="..\food\nicknames\nicknames.html">
                  zoo_frontend/src/pages/food/nicknames/nicknames.jsx
                </a>
              
                
                <a class="source" href="..\food\nicknames\nicknames.styles.html">
                  zoo_frontend/src/pages/food/nicknames/nicknames.styles.js
                </a>
              
                
                <a class="source" href="..\food\nutrDef\index.html">
                  zoo_frontend/src/pages/food/nutrDef/index.js
                </a>
              
                
                <a class="source" href="..\food\nutrDef\nutrDef.html">
                  zoo_frontend/src/pages/food/nutrDef/nutrDef.jsx
                </a>
              
                
                <a class="source" href="..\food\nutrDef\nutrDef.styles.html">
                  zoo_frontend/src/pages/food/nutrDef/nutrDef.styles.js
                </a>
              
                
                <a class="source" href="..\food\units\index.html">
                  zoo_frontend/src/pages/food/units/index.js
                </a>
              
                
                <a class="source" href="..\food\units\units.html">
                  zoo_frontend/src/pages/food/units/units.jsx
                </a>
              
                
                <a class="source" href="..\food\units\units.styles.html">
                  zoo_frontend/src/pages/food/units/units.styles.js
                </a>
              
                
                <a class="source" href="..\home\home.html">
                  zoo_frontend/src/pages/home/home.jsx
                </a>
              
                
                <a class="source" href="..\home\home.styles.html">
                  zoo_frontend/src/pages/home/home.styles.js
                </a>
              
                
                <a class="source" href="..\home\index.html">
                  zoo_frontend/src/pages/home/index.js
                </a>
              
                
                <a class="source" href="..\kitchen\index.html">
                  zoo_frontend/src/pages/kitchen/index.js
                </a>
              
                
                <a class="source" href="..\kitchen\kitchenHome.html">
                  zoo_frontend/src/pages/kitchen/kitchenHome.jsx
                </a>
              
                
                <a class="source" href="..\kitchen\kitchenHome.styles.html">
                  zoo_frontend/src/pages/kitchen/kitchenHome.styles.js
                </a>
              
                
                <a class="source" href="..\kitchen\prep\index.html">
                  zoo_frontend/src/pages/kitchen/prep/index.js
                </a>
              
                
                <a class="source" href="..\kitchen\prep\kitchen.html">
                  zoo_frontend/src/pages/kitchen/prep/kitchen.jsx
                </a>
              
                
                <a class="source" href="..\kitchen\prep\kitchen.styles.html">
                  zoo_frontend/src/pages/kitchen/prep/kitchen.styles.js
                </a>
              
                
                <a class="source" href="..\login\index.html">
                  zoo_frontend/src/pages/login/index.js
                </a>
              
                
                <a class="source" href="..\login\login.html">
                  zoo_frontend/src/pages/login/login.jsx
                </a>
              
                
                <a class="source" href="..\login\login.styles.html">
                  zoo_frontend/src/pages/login/login.styles.js
                </a>
              
                
                <a class="source" href="..\nutritionist\admin.html">
                  zoo_frontend/src/pages/nutritionist/admin.jsx
                </a>
              
                
                <a class="source" href="..\nutritionist\admin.styles.html">
                  zoo_frontend/src/pages/nutritionist/admin.styles.js
                </a>
              
                
                <a class="source" href="..\nutritionist\index.html">
                  zoo_frontend/src/pages/nutritionist/index.js
                </a>
              
                
                <a class="source" href="..\print\admin.html">
                  zoo_frontend/src/pages/print/admin.jsx
                </a>
              
                
                <a class="source" href="..\print\admin.styles.html">
                  zoo_frontend/src/pages/print/admin.styles.js
                </a>
              
                
                <a class="source" href="..\print\bin-label\admin.html">
                  zoo_frontend/src/pages/print/bin-label/admin.jsx
                </a>
              
                
                <a class="source" href="..\print\bin-label\admin.styles.html">
                  zoo_frontend/src/pages/print/bin-label/admin.styles.js
                </a>
              
                
                <a class="source" href="..\print\bin-label\index.html">
                  zoo_frontend/src/pages/print/bin-label/index.js
                </a>
              
                
                <a class="source" href="..\print\index.html">
                  zoo_frontend/src/pages/print/index.js
                </a>
              
                
                <a class="source" href="..\print\labels\admin.html">
                  zoo_frontend/src/pages/print/labels/admin.jsx
                </a>
              
                
                <a class="source" href="..\print\labels\admin.styles.html">
                  zoo_frontend/src/pages/print/labels/admin.styles.js
                </a>
              
                
                <a class="source" href="..\print\labels\index.html">
                  zoo_frontend/src/pages/print/labels/index.js
                </a>
              
                
                <a class="source" href="..\print\prep-sheet\admin.html">
                  zoo_frontend/src/pages/print/prep-sheet/admin.jsx
                </a>
              
                
                <a class="source" href="..\print\prep-sheet\admin.styles.html">
                  zoo_frontend/src/pages/print/prep-sheet/admin.styles.js
                </a>
              
                
                <a class="source" href="..\print\prep-sheet\index.html">
                  zoo_frontend/src/pages/print/prep-sheet/index.js
                </a>
              
                
                <a class="source" href="..\profile\index.html">
                  zoo_frontend/src/pages/profile/index.js
                </a>
              
                
                <a class="source" href="..\profile\profile.html">
                  zoo_frontend/src/pages/profile/profile.jsx
                </a>
              
                
                <a class="source" href="..\profile\profile.styles.html">
                  zoo_frontend/src/pages/profile/profile.styles.js
                </a>
              
                
                <a class="source" href="..\reports\admin.html">
                  zoo_frontend/src/pages/reports/admin.jsx
                </a>
              
                
                <a class="source" href="..\reports\admin.styles.html">
                  zoo_frontend/src/pages/reports/admin.styles.js
                </a>
              
                
                <a class="source" href="..\reports\cost-by-gl-code\admin.html">
                  zoo_frontend/src/pages/reports/cost-by-gl-code/admin.jsx
                </a>
              
                
                <a class="source" href="..\reports\cost-by-gl-code\admin.styles.html">
                  zoo_frontend/src/pages/reports/cost-by-gl-code/admin.styles.js
                </a>
              
                
                <a class="source" href="..\reports\cost-by-gl-code\index.html">
                  zoo_frontend/src/pages/reports/cost-by-gl-code/index.js
                </a>
              
                
                <a class="source" href="..\reports\dept-cards\admin.html">
                  zoo_frontend/src/pages/reports/dept-cards/admin.jsx
                </a>
              
                
                <a class="source" href="..\reports\dept-cards\admin.styles.html">
                  zoo_frontend/src/pages/reports/dept-cards/admin.styles.js
                </a>
              
                
                <a class="source" href="..\reports\dept-cards\index.html">
                  zoo_frontend/src/pages/reports/dept-cards/index.js
                </a>
              
                
                <a class="source" href="..\reports\dept-keeper-cards\admin.html">
                  zoo_frontend/src/pages/reports/dept-keeper-cards/admin.jsx
                </a>
              
                
                <a class="source" href="..\reports\dept-keeper-cards\admin.styles.html">
                  zoo_frontend/src/pages/reports/dept-keeper-cards/admin.styles.js
                </a>
              
                
                <a class="source" href="..\reports\dept-keeper-cards\index.html">
                  zoo_frontend/src/pages/reports/dept-keeper-cards/index.js
                </a>
              
                
                <a class="source" href="..\reports\feeding-cost\admin.html">
                  zoo_frontend/src/pages/reports/feeding-cost/admin.jsx
                </a>
              
                
                <a class="source" href="..\reports\feeding-cost\admin.styles.html">
                  zoo_frontend/src/pages/reports/feeding-cost/admin.styles.js
                </a>
              
                
                <a class="source" href="..\reports\feeding-cost\index.html">
                  zoo_frontend/src/pages/reports/feeding-cost/index.js
                </a>
              
                
                <a class="source" href="..\reports\index.html">
                  zoo_frontend/src/pages/reports/index.js
                </a>
              
                
                <a class="source" href="..\reports\prep-cards-table\admin.html">
                  zoo_frontend/src/pages/reports/prep-cards-table/admin.jsx
                </a>
              
                
                <a class="source" href="..\reports\prep-cards-table\admin.styles.html">
                  zoo_frontend/src/pages/reports/prep-cards-table/admin.styles.js
                </a>
              
                
                <a class="source" href="..\reports\prep-cards-table\index.html">
                  zoo_frontend/src/pages/reports/prep-cards-table/index.js
                </a>
              
                
                <a class="source" href="..\..\static\LocalStorage.html">
                  zoo_frontend/src/static/LocalStorage.js
                </a>
              
                
                <a class="source" href="..\..\static\Roles.html">
                  zoo_frontend/src/static/Roles.js
                </a>
              
                
                <a class="source" href="..\..\util\AuthProvider.html">
                  zoo_frontend/src/util/AuthProvider.jsx
                </a>
              
                
                <a class="source" href="..\..\util\PageLayout.html">
                  zoo_frontend/src/util/PageLayout.jsx
                </a>
              
                
                <a class="source" href="..\..\util\TableColumnHelper.html">
                  zoo_frontend/src/util/TableColumnHelper.js
                </a>
              
                
                <a class="source" href="..\..\util\WithPropsChecker.html">
                  zoo_frontend/src/util/WithPropsChecker.jsx
                </a>
              
                
                <a class="source" href="..\..\util\camelToNorm.html">
                  zoo_frontend/src/util/camelToNorm.js
                </a>
              
                
                <a class="source" href="..\..\util\withAuth.html">
                  zoo_frontend/src/util/withAuth.jsx
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>diet.jsx</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">'prop-types'</span>;
<span class="hljs-keyword">import</span> moment <span class="hljs-keyword">from</span> <span class="hljs-string">'moment'</span>;

<span class="hljs-keyword">import</span> Router <span class="hljs-keyword">from</span> <span class="hljs-string">'next/router'</span>;

<span class="hljs-keyword">import</span> Button <span class="hljs-keyword">from</span> <span class="hljs-string">'@material-ui/core/Button'</span>;
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;

<span class="hljs-keyword">import</span> {
  Typography, Card, Grid, LinearProgress, List, ListItem, ListItemText, ListItemSecondaryAction, IconButton, Divider,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@material-ui/core'</span>;

<span class="hljs-keyword">import</span> Delete <span class="hljs-keyword">from</span> <span class="hljs-string">'@material-ui/icons/Delete'</span>;
<span class="hljs-keyword">import</span> Edit <span class="hljs-keyword">from</span> <span class="hljs-string">'@material-ui/icons/Edit'</span>;

<span class="hljs-keyword">import</span> {
  Animals,
  CaseNotes,
  DeliveryContainers,
  DietChanges,
  DietHistory,
  DietPlans,
  Diets,
  FoodPrepTables,
  LifeStages,
  PrepNotes,
  Species,
  Subenclosures,
  Food,
  Units,
  Users,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../api'</span>;

<span class="hljs-keyword">import</span> { Notifications, ConfirmationDialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../components'</span>;

<span class="hljs-keyword">import</span> DietSelect <span class="hljs-keyword">from</span> <span class="hljs-string">'./DietSelectDialog'</span>;
<span class="hljs-keyword">import</span> DietPlanChangeDialog <span class="hljs-keyword">from</span> <span class="hljs-string">'./DietPlanChangeDialog'</span>;

<span class="hljs-keyword">import</span> DietHistoryList <span class="hljs-keyword">from</span> <span class="hljs-string">'./dietHistoryList'</span>;
<span class="hljs-keyword">import</span> DietForm <span class="hljs-keyword">from</span> <span class="hljs-string">'./dietForm'</span>;
<span class="hljs-keyword">import</span> PrepNotesForm <span class="hljs-keyword">from</span> <span class="hljs-string">'./prepNotesForm'</span>;
<span class="hljs-keyword">import</span> CaseNotesForm <span class="hljs-keyword">from</span> <span class="hljs-string">'./CaseNotesForm'</span>;
<span class="hljs-keyword">import</span> DietChangeCard <span class="hljs-keyword">from</span> <span class="hljs-string">'./DietChangeCard'</span>;
<span class="hljs-keyword">import</span> DietHistoryTable <span class="hljs-keyword">from</span> <span class="hljs-string">'./DietHistory'</span>;
<span class="hljs-keyword">import</span> CurrentDietTable <span class="hljs-keyword">from</span> <span class="hljs-string">'./CurrentDiet'</span>;

<span class="hljs-keyword">import</span> blankDietPlanJSON <span class="hljs-keyword">from</span> <span class="hljs-string">'./blankDietPlan.json'</span>;


<span class="hljs-keyword">import</span> Roles <span class="hljs-keyword">from</span> <span class="hljs-string">'../../static/Roles'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">static</span> propTypes = {
    <span class="hljs-attr">account</span>: PropTypes.object.isRequired,
    <span class="hljs-attr">token</span>: PropTypes.string,
    <span class="hljs-attr">classes</span>: PropTypes.object.isRequired,
    <span class="hljs-attr">Diets</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">DeliveryContainers</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">Species</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">FoodPrepTables</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">Subenclosures</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">Foods</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">Units</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">Users</span>: PropTypes.arrayOf(PropTypes.object).isRequired,
    <span class="hljs-attr">selectedDiet</span>: PropTypes.object,
    <span class="hljs-attr">new</span>: PropTypes.bool,

    <span class="hljs-attr">CaseNotes</span>: PropTypes.arrayOf(PropTypes.object),
    <span class="hljs-attr">DietChanges</span>: PropTypes.arrayOf(PropTypes.object),
    <span class="hljs-attr">DietHistory</span>: PropTypes.arrayOf(PropTypes.object),
    <span class="hljs-attr">DietPlans</span>: PropTypes.arrayOf(PropTypes.object),
    <span class="hljs-attr">oldDietPlan</span>: PropTypes.arrayOf(PropTypes.object),
    <span class="hljs-attr">PrepNotes</span>: PropTypes.arrayOf(PropTypes.object),

    <span class="hljs-attr">serverError</span>: PropTypes.string,
  };

  <span class="hljs-keyword">static</span> defaultProps = {
    <span class="hljs-attr">token</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">selectedDiet</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">new</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">CaseNotes</span>: [],
    <span class="hljs-attr">DietChanges</span>: [],
    <span class="hljs-attr">DietHistory</span>: [],
    <span class="hljs-attr">DietPlans</span>: [],
    <span class="hljs-attr">oldDietPlan</span>: [],
    <span class="hljs-attr">PrepNotes</span>: [],

    <span class="hljs-attr">serverError</span>: <span class="hljs-string">''</span>,
  };

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> getInitialProps({ query, authToken }) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>api helpers on server side</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> serverAnimalAPI = <span class="hljs-keyword">new</span> Animals(authToken);
    <span class="hljs-keyword">const</span> serverCaseNotesAPI = <span class="hljs-keyword">new</span> CaseNotes(authToken);
    <span class="hljs-keyword">const</span> serverDeliverContainersAPI = <span class="hljs-keyword">new</span> DeliveryContainers(authToken);
    <span class="hljs-keyword">const</span> serverDietChangesAPI = <span class="hljs-keyword">new</span> DietChanges(authToken);
    <span class="hljs-keyword">const</span> serverDietHistoryAPI = <span class="hljs-keyword">new</span> DietHistory(authToken);
    <span class="hljs-keyword">const</span> serverDietPlansAPI = <span class="hljs-keyword">new</span> DietPlans(authToken);
    <span class="hljs-keyword">const</span> serverDietsAPI = <span class="hljs-keyword">new</span> Diets(authToken);
    <span class="hljs-keyword">const</span> serverFoodPrepTablesAPI = <span class="hljs-keyword">new</span> FoodPrepTables(authToken);
    <span class="hljs-keyword">const</span> serverLifeStagesAPI = <span class="hljs-keyword">new</span> LifeStages(authToken);
    <span class="hljs-keyword">const</span> serverPrepNotesAPI = <span class="hljs-keyword">new</span> PrepNotes(authToken);
    <span class="hljs-keyword">const</span> serverSpeciesAPI = <span class="hljs-keyword">new</span> Species(authToken);
    <span class="hljs-keyword">const</span> serverSubenclosuresAPI = <span class="hljs-keyword">new</span> Subenclosures(authToken);
    <span class="hljs-keyword">const</span> serverFoodAPI = <span class="hljs-keyword">new</span> Food(authToken);
    <span class="hljs-keyword">const</span> serverUnitsAPI = <span class="hljs-keyword">new</span> Units(authToken);
    <span class="hljs-keyword">const</span> serverUserAPI = <span class="hljs-keyword">new</span> Users(authToken);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>get base data that we know we will need to load</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">const</span> [AllAnimals, AllDeliveryContainers, AllDiets, AllFoodPrepTables, AllLifeStages, AllSpecies, AllSubenclosures, AllFoods, AllUnits, AllUsers] = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(
      [
        serverAnimalAPI.getAnimals(),
        serverDeliverContainersAPI.getDeliveryContainers(),
        serverDietsAPI.getDiets(),
        serverFoodPrepTablesAPI.getFoodPrepTables(),
        serverLifeStagesAPI.getLifeStages(),
        serverSpeciesAPI.getSpecies(),
        serverSubenclosuresAPI.getSubenclosures(),
        serverFoodAPI.getFood(),
        serverUnitsAPI.getUnits(),
        serverUserAPI.getUsers(),
      ],
    );</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>if the id of a diet is present, then load its necessary information</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (query.id) {
      <span class="hljs-keyword">if</span> (query.id !== <span class="hljs-string">'new'</span>) {
        <span class="hljs-keyword">const</span> dietId = <span class="hljs-built_in">parseInt</span>(query.id, <span class="hljs-number">10</span>);
        <span class="hljs-keyword">const</span> matchedDiet = AllDiets.data.find(<span class="hljs-function">(<span class="hljs-params">findDiet</span>) =&gt;</span> findDiet.dietId === dietId);

        <span class="hljs-keyword">if</span> (!matchedDiet) {
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">Animals</span>: AllAnimals.data,
            <span class="hljs-attr">DeliveryContainers</span>: AllDeliveryContainers.data,
            <span class="hljs-attr">Diets</span>: AllDiets.data,
            <span class="hljs-attr">FoodPrepTables</span>: AllFoodPrepTables.data,
            <span class="hljs-attr">LifeStages</span>: AllLifeStages.data,
            <span class="hljs-attr">Species</span>: AllSpecies.data,
            <span class="hljs-attr">Subenclosures</span>: AllSubenclosures.data,
            <span class="hljs-attr">Foods</span>: AllFoods.data,
            <span class="hljs-attr">Units</span>: AllUnits.data,
            <span class="hljs-attr">Users</span>: AllUsers.data,
            <span class="hljs-attr">serverError</span>: <span class="hljs-string">'Diet in URL could not be found.'</span>,
          };
        }
        <span class="hljs-keyword">const</span> serverMatchedDietQuery = { <span class="hljs-attr">where</span>: { dietId } };

        <span class="hljs-keyword">const</span> [matchedCaseNotes, matchedDietChanges, matchedDietHistory, matchedDietPlans, matchedPrepNotes] = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([
          serverCaseNotesAPI.getCaseNotes(serverMatchedDietQuery),
          serverDietChangesAPI.getDietChanges(serverMatchedDietQuery),
          serverDietHistoryAPI.getDietHistories(serverMatchedDietQuery),
          serverDietPlansAPI.getDietPlans(serverMatchedDietQuery),
          serverPrepNotesAPI.getPrepNotes(serverMatchedDietQuery),
        ]);

        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">Animals</span>: AllAnimals.data,
          <span class="hljs-attr">CaseNotes</span>: matchedCaseNotes.data,
          <span class="hljs-attr">DeliveryContainers</span>: AllDeliveryContainers.data,
          <span class="hljs-attr">DietChanges</span>: matchedDietChanges.data,
          <span class="hljs-attr">DietHistory</span>: matchedDietHistory.data,
          <span class="hljs-attr">DietPlans</span>: matchedDietPlans.data,
          <span class="hljs-attr">oldDietPlan</span>: matchedDietPlans.data,
          <span class="hljs-attr">Diets</span>: AllDiets.data,
          <span class="hljs-attr">FoodPrepTables</span>: AllFoodPrepTables.data,
          <span class="hljs-attr">LifeStages</span>: AllLifeStages.data,
          <span class="hljs-attr">PrepNotes</span>: matchedPrepNotes.data,
          <span class="hljs-attr">Species</span>: AllSpecies.data,
          <span class="hljs-attr">Subenclosures</span>: AllSubenclosures.data,
          <span class="hljs-attr">Foods</span>: AllFoods.data,
          <span class="hljs-attr">Units</span>: AllUnits.data,
          <span class="hljs-attr">Users</span>: AllUsers.data,
          <span class="hljs-attr">selectedDiet</span>: matchedDiet,
        };
      }
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">Animals</span>: AllAnimals.data,
        <span class="hljs-attr">DeliveryContainers</span>: AllDeliveryContainers.data,
        <span class="hljs-attr">Diets</span>: AllDiets.data,
        <span class="hljs-attr">FoodPrepTables</span>: AllFoodPrepTables.data,
        <span class="hljs-attr">LifeStages</span>: AllLifeStages.data,
        <span class="hljs-attr">Species</span>: AllSpecies.data,
        <span class="hljs-attr">Subenclosures</span>: AllSubenclosures.data,
        <span class="hljs-attr">Foods</span>: AllFoods.data,
        <span class="hljs-attr">Units</span>: AllUnits.data,
        <span class="hljs-attr">Users</span>: AllUsers.data,
        <span class="hljs-attr">new</span>: <span class="hljs-literal">true</span>,
      };
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">Animals</span>: AllAnimals.data,
      <span class="hljs-attr">DeliveryContainers</span>: AllDeliveryContainers.data,
      <span class="hljs-attr">Diets</span>: AllDiets.data,
      <span class="hljs-attr">FoodPrepTables</span>: AllFoodPrepTables.data,
      <span class="hljs-attr">LifeStages</span>: AllLifeStages.data,
      <span class="hljs-attr">Species</span>: AllSpecies.data,
      <span class="hljs-attr">Subenclosures</span>: AllSubenclosures.data,
      <span class="hljs-attr">Foods</span>: AllFoods.data,
      <span class="hljs-attr">Units</span>: AllUnits.data,
      <span class="hljs-attr">Users</span>: AllUsers.data,
    };
  }

  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);

    <span class="hljs-keyword">let</span> editDisabled = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.account &amp;&amp; <span class="hljs-keyword">this</span>.props.account.role) {
      <span class="hljs-keyword">const</span> { role } = <span class="hljs-keyword">this</span>.props.account;
      <span class="hljs-keyword">if</span> (role !== Roles.ADMIN &amp;&amp; role !== Roles.NUTRITIONIST) {
        editDisabled = <span class="hljs-literal">true</span>;
      }
    }
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">newDietOpen</span>: props.new, <span class="hljs-comment">// auto open up new form if from the url</span>
      dietSelectDialogOpen: !props.new &amp;&amp; !props.selectedDiet,
      <span class="hljs-attr">dietDeleteDialogOpen</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">Diets</span>: props.Diets, <span class="hljs-comment">// load Diets into the state to allow us to add a new diet in if created via page</span>
      selectedDiet: props.selectedDiet || <span class="hljs-literal">null</span>, <span class="hljs-comment">// if a user has a selected diet from the URL load it here</span>
      dietChangeDialogOpen: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>if diet specific stuff is gathered from URL load it into state so we can change dependent tables etc accordingly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      CaseNotes: props.CaseNotes || [],
      <span class="hljs-attr">DietChanges</span>: props.DietChanges || [],
      <span class="hljs-attr">DietHistory</span>: props.DietHistory || [],
      <span class="hljs-attr">DietPlans</span>: props.DietPlans || [],
      <span class="hljs-attr">oldDietPlan</span>: props.oldDietPlan || [],
      <span class="hljs-attr">PrepNotes</span>: props.PrepNotes || [],</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>dropdown selection codes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      speciesCodeOptions: props.Species.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({ <span class="hljs-attr">label</span>: item.species ? item.species : <span class="hljs-string">''</span>, <span class="hljs-attr">value</span>: item.speciesId })),
      <span class="hljs-attr">deliveryContainerCodeOptions</span>: props.DeliveryContainers.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({ <span class="hljs-attr">label</span>: item.dc ? item.dc : <span class="hljs-string">''</span>, <span class="hljs-attr">value</span>: item.dcId })),
      <span class="hljs-attr">groupDietCodeOptions</span>: props.Subenclosures.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({ <span class="hljs-attr">label</span>: item.subenclosure ? item.subenclosure : <span class="hljs-string">''</span>, <span class="hljs-attr">value</span>: item.seId })),
      <span class="hljs-attr">tableCodeOptions</span>: props.FoodPrepTables.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({ <span class="hljs-attr">label</span>: item.description ? item.description : <span class="hljs-string">''</span>, <span class="hljs-attr">value</span>: item.tableId })),</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>dietHistory selections</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      DietHistoryOptions: props.DietHistory.filter(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> props.DietHistory.findIndex(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> el.startId === item.startId) &gt;= index).map(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> ({
        <span class="hljs-attr">text</span>: moment(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(el.startId)).format(<span class="hljs-string">'MM-DD-YYYY h:mm A'</span>),
        <span class="hljs-attr">id</span>: el.startId,
      })).reverse(),</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>diet plan window</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      viewCurrentDietPlan: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">selectedDietHistories</span>: [],
      <span class="hljs-attr">numAnimals</span>: props.selectedDiet ? props.selectedDiet.numAnimals : <span class="hljs-number">1</span>,
      <span class="hljs-attr">pendingChanges</span>: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>diet plan save data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      dietPlanChangeDialogOpen: <span class="hljs-literal">false</span>, <span class="hljs-comment">// dietPlan specific changelog window</span>
      dialogChangeNotes: <span class="hljs-string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>DISABLE EDIT</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      editDisabled,
    };
    <span class="hljs-keyword">this</span>.clientDietAPI = <span class="hljs-keyword">new</span> Diets(props.token);

    <span class="hljs-keyword">this</span>.notificationBar = React.createRef();
    <span class="hljs-keyword">this</span>.currentDietRef = React.createRef();

    <span class="hljs-keyword">this</span>.clientCaseNotesAPI = <span class="hljs-keyword">new</span> CaseNotes(props.token);
    <span class="hljs-keyword">this</span>.clientDietChangesAPI = <span class="hljs-keyword">new</span> DietChanges(props.token);
    <span class="hljs-keyword">this</span>.clientDietHistoryAPI = <span class="hljs-keyword">new</span> DietHistory(props.token);
    <span class="hljs-keyword">this</span>.clientDietPlansAPI = <span class="hljs-keyword">new</span> DietPlans(props.token);
    <span class="hljs-keyword">this</span>.clientPrepNotesAPI = <span class="hljs-keyword">new</span> PrepNotes(props.token);
  }

  componentDidMount() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.serverError) {
      <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">`Error from server: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.props.serverError}</span>`</span>);
    }
  }

  grabDietRelatedRecords = <span class="hljs-keyword">async</span> (selected) =&gt; {
    <span class="hljs-keyword">if</span> (selected) {
      <span class="hljs-keyword">const</span> { dietId } = selected;
      <span class="hljs-keyword">const</span> serverMatchedDietQuery = { <span class="hljs-attr">where</span>: { dietId } };

      <span class="hljs-keyword">const</span> [matchedCaseNotes, matchedDietChanges, matchedDietHistory, matchedDietPlans, matchedPrepNotes] = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([
        <span class="hljs-keyword">this</span>.clientCaseNotesAPI.getCaseNotes(serverMatchedDietQuery),
        <span class="hljs-keyword">this</span>.clientDietChangesAPI.getDietChanges(serverMatchedDietQuery),
        <span class="hljs-keyword">this</span>.clientDietHistoryAPI.getDietHistories(serverMatchedDietQuery),
        <span class="hljs-keyword">this</span>.clientDietPlansAPI.getDietPlans(serverMatchedDietQuery),
        <span class="hljs-keyword">this</span>.clientPrepNotesAPI.getPrepNotes(serverMatchedDietQuery),
      ]);
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve({
        <span class="hljs-attr">matchedCaseNotes</span>: matchedCaseNotes.data,
        <span class="hljs-attr">matchedDietChanges</span>: matchedDietChanges.data,
        <span class="hljs-attr">matchedDietHistory</span>: matchedDietHistory.data,
        <span class="hljs-attr">matchedDietPlans</span>: matchedDietPlans.data,
        <span class="hljs-attr">matchedPrepNotes</span>: matchedPrepNotes.data,
      });
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'selected diet is blank'</span>));
  }

  handleDietUpdate() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-keyword">async</span> (res, rej) =&gt; {
      <span class="hljs-keyword">const</span> localSelectedDiet = { ...this.state.selectedDiet };
      <span class="hljs-built_in">Object</span>.assign(localSelectedDiet, <span class="hljs-keyword">this</span>.state.dietUpdatePayload);


      <span class="hljs-keyword">let</span> newDietChange = {};
      <span class="hljs-keyword">const</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

      <span class="hljs-keyword">let</span> dietChangeAxios = {};
      dietChangeAxios = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.clientDietChangesAPI.createDietChanges({
        <span class="hljs-attr">dietChangeDate</span>: now,
        <span class="hljs-attr">dietChangeReason</span>: <span class="hljs-keyword">this</span>.state.dialogChangeNotes,
        <span class="hljs-attr">dietId</span>: localSelectedDiet.dietId,
        <span class="hljs-attr">userId</span>: <span class="hljs-keyword">this</span>.props.account.id,
      }).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating diet change record on server. Please contact system admin'</span>);
        <span class="hljs-built_in">console</span>.error(err);
        rej(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error creating diet change record on server. Please contact system admin'</span>));
      });

      newDietChange = dietChangeAxios.data;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>add new date and add the current user to be the last one to edit diet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      localSelectedDiet.date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString();
      localSelectedDiet.userLogin = <span class="hljs-keyword">this</span>.props.account.id;

      <span class="hljs-keyword">this</span>.clientDietAPI.updateDiets(localSelectedDiet.dietId, localSelectedDiet).then(
        <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
          <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
            <span class="hljs-attr">dietUpdatePayload</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// clear value since it's now updated</span>
            dialogChangeNotes: <span class="hljs-string">''</span>, <span class="hljs-comment">// clear out change notes</span>
            selectedDiet: result.data,
            <span class="hljs-attr">Diets</span>: prevState.Diets.map(<span class="hljs-function">(<span class="hljs-params">old</span>) =&gt;</span> {
              <span class="hljs-keyword">if</span> (old.dietId === result.data.dietId) {
                <span class="hljs-keyword">return</span> result.data;
              }
              <span class="hljs-keyword">return</span> old;
            }),
            <span class="hljs-attr">DietChanges</span>: [...prevState.DietChanges, newDietChange],
          }));</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>need to update state here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          res();
        },
        (err) =&gt; {
          <span class="hljs-built_in">console</span>.error(err);
          rej();
        },
      );
    });
  }

  <span class="hljs-keyword">async</span> handleDietDelete() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.selectedDiet &amp;&amp; <span class="hljs-keyword">this</span>.state.selectedDiet.dietId) {
      <span class="hljs-keyword">const</span> dietToDelete = <span class="hljs-keyword">this</span>.state.selectedDiet.dietId;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>delete related diets then delete main diet</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (dietToDelete) {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([
            <span class="hljs-keyword">this</span>.clientDietHistoryAPI.deleteDietHistoryByDietId(dietToDelete),
            <span class="hljs-keyword">this</span>.clientCaseNotesAPI.deleteCaseNotesByDietId(dietToDelete),
            <span class="hljs-keyword">this</span>.clientDietPlansAPI.deleteDietPlanByDietId(dietToDelete),
            <span class="hljs-keyword">this</span>.clientPrepNotesAPI.deletePrepNotesByDietId(dietToDelete),
            <span class="hljs-keyword">this</span>.clientDietChangesAPI.deleteDietChangesByDietId(dietToDelete),
          ]);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-built_in">console</span>.error(error);
          <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting related records of diet. Please contact system admin.'</span>);
          <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">this</span>.clientDietAPI.deleteDiets(dietToDelete).then(
          <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>set window href</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">const</span> href = <span class="hljs-string">'/diet'</span>;
            Router.push(href, href, { <span class="hljs-attr">shallow</span>: <span class="hljs-literal">true</span> });</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>clear state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
              <span class="hljs-attr">selectedDiet</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">Diets</span>: prevState.Diets.filter(<span class="hljs-function">(<span class="hljs-params">diet</span>) =&gt;</span> diet.dietId !== dietToDelete),</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>clear related record data since record is deleted.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              CaseNotes: [],
              <span class="hljs-attr">DietChanges</span>: [],
              <span class="hljs-attr">DietHistory</span>: [],
              <span class="hljs-attr">DietHistoryOptions</span>: [],
              <span class="hljs-attr">DietPlans</span>: [],
              <span class="hljs-attr">PrepNotes</span>: [],
            }));
          },
          (reject) =&gt; {
            <span class="hljs-built_in">console</span>.error(reject);
            <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting diet on server'</span>);
          },
        );
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'selected diet is missing id'</span>);
      }
    }
  }

  handleDietCreate(payload) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> localPayload = { ...payload };</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>default values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      localPayload.date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString();
      localPayload.userLogin = <span class="hljs-keyword">this</span>.props.account.id;
      localPayload.numAnimals = <span class="hljs-number">1</span>;

      <span class="hljs-keyword">this</span>.clientDietAPI.createDiets(localPayload).then(
        <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>set window href</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">const</span> href = <span class="hljs-string">`/diet?id=<span class="hljs-subst">${result.data.dietId}</span>`</span>;
          Router.push(href, href, { <span class="hljs-attr">shallow</span>: <span class="hljs-literal">true</span> });</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>update state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
            <span class="hljs-attr">Diets</span>: [...prevState.Diets, result.data],
            <span class="hljs-attr">newDietOpen</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">selectedDiet</span>: { ...result.data },
            <span class="hljs-attr">numAnimals</span>: result.data.numAnimals,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>all related record data should be null on a brand new entry
this is just in case state wasn’t cleared properly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            CaseNotes: [],
            <span class="hljs-attr">DietChanges</span>: [],
            <span class="hljs-attr">DietHistory</span>: [],
            <span class="hljs-attr">DietHistoryOptions</span>: [],
            <span class="hljs-attr">DietPlans</span>: [],
            <span class="hljs-attr">PrepNotes</span>: [],
          }));
        },
        (error) =&gt; {
          <span class="hljs-built_in">console</span>.error(error);
          <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating diet on server.'</span>);
          rej();
        },
      );
    });
  }

  handlePrepNotesCreate(payload) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> localPayload = { ...payload };
      localPayload.dietId = <span class="hljs-keyword">this</span>.state.selectedDiet.dietId;

      <span class="hljs-keyword">this</span>.clientPrepNotesAPI.createPrepNotes(localPayload).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">PrepNotes</span>: [...prevState.PrepNotes, result.data],
        }), () =&gt; {
          res();
        });
      }, (error) =&gt; {
        <span class="hljs-built_in">console</span>.error(error);
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating prep note on server.'</span>);
        rej();
      });
    });
  }

  handlePrepNoteChange(payload) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> localPayload = { ...this.state.selectedPrepNote, ...payload };
      <span class="hljs-keyword">if</span> (!localPayload.prepNoteId) {
        rej();
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error updating prep note, id of prep note is missing'</span>);
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">this</span>.clientPrepNotesAPI.updatePrepNotes(localPayload.prepNoteId, localPayload).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">PrepNotes</span>: prevState.PrepNotes.map(<span class="hljs-function">(<span class="hljs-params">old</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (old.prepNoteId === result.data.prepNoteId) {
              <span class="hljs-keyword">return</span> result.data;
            }
            <span class="hljs-keyword">return</span> old;
          }),
          <span class="hljs-attr">selectedPrepNote</span>: <span class="hljs-literal">null</span>,
        }), () =&gt; {
          res();
        });
      }, (error) =&gt; {
        <span class="hljs-built_in">console</span>.error(error);
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error updating prep note on server.'</span>);
        rej();
      });
    });
  }

  <span class="hljs-keyword">async</span> handlePrepNoteDelete(payload) {
    <span class="hljs-keyword">if</span> (payload.prepNoteId) {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.clientPrepNotesAPI.deletePrepNotes(payload.prepNoteId).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">PrepNotes</span>: prevState.PrepNotes.filter(<span class="hljs-function">(<span class="hljs-params">note</span>) =&gt;</span> note.prepNoteId !== payload.prepNoteId),
        }), () =&gt; {
          <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'info'</span>, <span class="hljs-string">'Delete prep note was successful!'</span>);
        });
      }, (err) =&gt; {
        <span class="hljs-built_in">console</span>.error(err);
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting prep note on server'</span>);
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting prep note. Missing id'</span>);
    }
  }

  <span class="hljs-keyword">async</span> handleCaseNoteCreate(payload) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> localPayload = { ...payload };
      localPayload.dietId = <span class="hljs-keyword">this</span>.state.selectedDiet.dietId;
      localPayload.caseDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(); <span class="hljs-comment">// set to now</span>

      <span class="hljs-keyword">this</span>.clientCaseNotesAPI.createCaseNotes(localPayload).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">CaseNotes</span>: [...prevState.CaseNotes, result.data],
          <span class="hljs-attr">selectedCaseNote</span>: <span class="hljs-literal">null</span>,
        }), () =&gt; {
          res();
          <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'info'</span>, <span class="hljs-string">'case note created successfully'</span>);
        });
      }, (error) =&gt; {
        <span class="hljs-built_in">console</span>.error(error);
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating case note on server.'</span>);
        rej();
      });
    });
  }

  <span class="hljs-keyword">async</span> handleCaseNoteChange(payload) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> localPayload = { ...this.state.selectedCaseNote, ...payload };</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>update the last touched time to now if description is changed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      localPayload.caseDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString();
      <span class="hljs-keyword">if</span> (!localPayload.caseNotesId) {
        rej();
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error updating prep note, id of prep note is missing'</span>);
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">this</span>.clientCaseNotesAPI.updateCaseNotes(localPayload.caseNotesId, localPayload).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">CaseNotes</span>: prevState.CaseNotes.map(<span class="hljs-function">(<span class="hljs-params">old</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (old.caseNotesId === result.data.caseNotesId) {
              <span class="hljs-keyword">return</span> result.data;
            }
            <span class="hljs-keyword">return</span> old;
          }),
          <span class="hljs-attr">selectedCaseNote</span>: <span class="hljs-literal">null</span>,
        }), () =&gt; {
          res();
        });
      }, (error) =&gt; {
        <span class="hljs-built_in">console</span>.error(error);
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error updating prep note on server.'</span>);
        rej();
      });
    });
  }

  <span class="hljs-keyword">async</span> handleCaseNoteDelete(payload) {
    <span class="hljs-keyword">if</span> (payload.caseNotesId) {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.clientCaseNotesAPI.deleteCaseNotes(payload.caseNotesId).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">CaseNotes</span>: prevState.CaseNotes.filter(<span class="hljs-function">(<span class="hljs-params">note</span>) =&gt;</span> note.caseNotesId !== payload.caseNotesId),
        }), () =&gt; {
          <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'info'</span>, <span class="hljs-string">'Delete case note was successful!'</span>);
        });
      }, (err) =&gt; {
        <span class="hljs-built_in">console</span>.error(err);
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting case note on server'</span>);
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting case note. Missing id'</span>);
    }
  }

  handleDietPlanUpdate(valuesChanged, id) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> UpdatedDietPlans = [
          ...prevState.DietPlans.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (item.id !== id) {
              <span class="hljs-keyword">return</span> item;
            }
            <span class="hljs-keyword">const</span> updatedRow = item;
            <span class="hljs-built_in">Object</span>.assign(updatedRow, valuesChanged);
            <span class="hljs-keyword">return</span> updatedRow;
          }),
        ];
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">DietPlans</span>: UpdatedDietPlans, <span class="hljs-attr">pendingChanges</span>: <span class="hljs-literal">true</span> };
      }, () =&gt; {
        resolve();
      });
    });
  }

  handleDietPlanAdd(newRow) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
        <span class="hljs-attr">DietPlans</span>: [...prevState.DietPlans, newRow],
        <span class="hljs-attr">pendingChanges</span>: <span class="hljs-literal">true</span>,
      }), () =&gt; {
        resolve();
      });
    });
  }

  handleDietPlanDelete(oldRow) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
        <span class="hljs-attr">DietPlans</span>: [...prevState.DietPlans.filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.id !== oldRow.id)],
        <span class="hljs-attr">pendingChanges</span>: <span class="hljs-literal">true</span>,
      }), () =&gt; {
        resolve();
      });
    });
  }

  handleNumAnimalsChange(newNumAnimals) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> ({
        <span class="hljs-attr">numAnimals</span>: newNumAnimals,
        <span class="hljs-attr">DietPlans</span>: prevState.DietPlans.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> locItem = { ...item };
          locItem.groupAmount = item.indAmount * newNumAnimals;
          <span class="hljs-keyword">return</span> locItem;
        }),
        <span class="hljs-attr">pendingChanges</span>: <span class="hljs-literal">true</span>,
      }), () =&gt; {
        resolve();
      });
    });
  }

  handleDietPlanSave() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-keyword">async</span> (resolve, reject) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>is there a change in the number of animals from the previously known selected value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.numAnimals !== <span class="hljs-keyword">this</span>.state.selectedDiet.numAnimals) {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>update the diet</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> localSelectedDiet = { ...this.state.selectedDiet };
        <span class="hljs-built_in">Object</span>.assign(localSelectedDiet, { <span class="hljs-attr">numAnimals</span>: <span class="hljs-keyword">this</span>.state.numAnimals });</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>add new date and add the current user to be the last one to edit diet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        localSelectedDiet.date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString();
        localSelectedDiet.userLogin = <span class="hljs-keyword">this</span>.props.account.id;

        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
          <span class="hljs-keyword">this</span>.clientDietAPI.updateDiets(localSelectedDiet.dietId, localSelectedDiet).then(
            <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
              <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
                <span class="hljs-attr">selectedDiet</span>: result.data,
                <span class="hljs-attr">Diets</span>: prevState.Diets.map(<span class="hljs-function">(<span class="hljs-params">old</span>) =&gt;</span> {
                  <span class="hljs-keyword">if</span> (old.dietId === result.data.dietId) {
                    <span class="hljs-keyword">return</span> result.data;
                  }
                  <span class="hljs-keyword">return</span> old;
                }),
              }), () =&gt; res());
            },
            (err) =&gt; {
              <span class="hljs-built_in">console</span>.error(err);
              rej();
            },
          );
        });
      }

      <span class="hljs-keyword">let</span> newDietChange = {};
      <span class="hljs-keyword">const</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

      <span class="hljs-keyword">let</span> dietChangeAxios = {};
      dietChangeAxios = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.clientDietChangesAPI.createDietChanges({
        <span class="hljs-attr">dietChangeDate</span>: now,
        <span class="hljs-attr">dietChangeReason</span>: <span class="hljs-keyword">this</span>.state.dialogChangeNotes,
        <span class="hljs-attr">dietId</span>: <span class="hljs-keyword">this</span>.state.selectedDiet.dietId,
        <span class="hljs-attr">userId</span>: <span class="hljs-keyword">this</span>.props.account.id,
      }).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating diet change record on server. Please contact system admin'</span>);
        <span class="hljs-built_in">console</span>.error(err);
        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error creating diet change record on server. Please contact system admin'</span>));
      });

      newDietChange = dietChangeAxios.data;
      <span class="hljs-keyword">const</span> { dietChangeId } = newDietChange; <span class="hljs-comment">// use this to map dietChange to all new dietHistory records</span></pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>from dietPlan create all new dietHistories and link up the dietChange</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">const</span> dietHistoryPromises = <span class="hljs-keyword">this</span>.state.oldDietPlan.map(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> {
          id, groupAmount, tempAmount, feeding, ...rest
        } = entry;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.clientDietHistoryAPI.createDietHistories({
          ...rest,
          dietChangeId,
          <span class="hljs-attr">amount</span>: entry.groupAmount,
          <span class="hljs-attr">startId</span>: now,
        });
      });

      <span class="hljs-keyword">let</span> newDietHistories = [];

      newDietHistories = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(dietHistoryPromises).catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating diet history records on server. Please contact system admin.'</span>);
        <span class="hljs-built_in">console</span>.error(error);
        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error creating diet history records on server'</span>));
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>create new whole list of diet history records for every diet plan item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      newDietHistories = newDietHistories.map(<span class="hljs-function">(<span class="hljs-params">i</span>) =&gt;</span> i.data);
      <span class="hljs-keyword">const</span> newcombinedDietHistory = [...this.state.DietHistory, ...newDietHistories];</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>from our new list of diet history, create new selection list items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">const</span> newHistoryOptions = newcombinedDietHistory.filter(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> newcombinedDietHistory.findIndex(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> el.startId === item.startId) &gt;= index).map(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> ({
        <span class="hljs-attr">text</span>: moment(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(el.startId)).format(<span class="hljs-string">'MM-DD-YYYY h:mm A'</span>),
        <span class="hljs-attr">id</span>: el.startId,
      })).reverse();</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>FIND NEW DIET PLANS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">const</span> newDietPlans = <span class="hljs-keyword">this</span>.state.DietPlans.filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> !(<span class="hljs-string">'id'</span> <span class="hljs-keyword">in</span> item));

      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'pending created diet plans'</span>, newDietPlans);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>CREATE NEW DIET PLANS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">const</span> createdDietPlanPromises = newDietPlans.map(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> <span class="hljs-keyword">this</span>.clientDietPlansAPI.createDietPlans(<span class="hljs-built_in">Object</span>.assign(blankDietPlanJSON, entry)));
      <span class="hljs-keyword">let</span> createdDietPlans = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(createdDietPlanPromises).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error creating new diet plan records on server. Please contact system admin.'</span>);
        <span class="hljs-built_in">console</span>.error(err);
        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error creating new diet plan records on server.'</span>));
      });
      createdDietPlans = createdDietPlans.map(<span class="hljs-function">(<span class="hljs-params">i</span>) =&gt;</span> i.data);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>FIND EXISTING DIET PLANS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">const</span> updatedDietPlans = <span class="hljs-keyword">this</span>.state.DietPlans.filter(<span class="hljs-function">(<span class="hljs-params">plan</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.deletedDietPlans.find(<span class="hljs-function">(<span class="hljs-params">deleted</span>) =&gt;</span> deleted.id === plan.id)) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>new diet plans are harder to match perfectly since they don’t have a unique id since they havent been created
match against foodId, dietId, and indAmount</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (newDietPlans.find(<span class="hljs-function">(<span class="hljs-params">newPlan</span>) =&gt;</span> newPlan.foodId === plan.foodId &amp;&amp; newPlan.dietId === plan.dietId &amp;&amp; newPlan.indAmount === plan.indAmount)) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      });

      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'pending updated diet plans'</span>, updatedDietPlans);</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>UDPATE EXISTING DIET PLANS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">let</span> UpdatedDietPlanPromises = [];
      UpdatedDietPlanPromises = updatedDietPlans.map(<span class="hljs-function">(<span class="hljs-params">plan</span>) =&gt;</span> <span class="hljs-keyword">this</span>.clientDietPlansAPI.updateDietPlans(plan.id, plan));
      <span class="hljs-keyword">let</span> updatedDietPlanResults = [];
      updatedDietPlanResults = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(UpdatedDietPlanPromises).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error updating existing diet plan records on server. Please contact system admin.'</span>);
        <span class="hljs-built_in">console</span>.error(err);
        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error updating existing diet plan records on server.'</span>));
      });

      updatedDietPlanResults = updatedDietPlanResults.map(<span class="hljs-function">(<span class="hljs-params">i</span>) =&gt;</span> i.data);

      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'pending delete diet plans'</span>, <span class="hljs-keyword">this</span>.state.deletedDietPlans);</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>DELETE REMOVED DIET PLANS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">let</span> deleteDietPlanPromises = [];
      deleteDietPlanPromises = <span class="hljs-keyword">this</span>.state.deletedDietPlans.map(<span class="hljs-function">(<span class="hljs-params">deleted</span>) =&gt;</span> <span class="hljs-keyword">this</span>.clientDietPlansAPI.deleteDietPlans(deleted.id));
      <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(deleteDietPlanPromises).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.notificationBar.current.showNotification(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Error deleting removed diet plan records on server. Please contact system admin.'</span>);
        <span class="hljs-built_in">console</span>.error(err);
        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error deleting removed diet plan records on server.'</span>));
      });

      <span class="hljs-keyword">this</span>.currentDietRef.current.setState({
        <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>,
      }, () =&gt; {
        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> ({
          <span class="hljs-attr">DietPlans</span>: [...updatedDietPlanResults, ...createdDietPlans],
          <span class="hljs-attr">DietChanges</span>: [...prevState.DietChanges, newDietChange],
          <span class="hljs-attr">DietHistoryOptions</span>: newHistoryOptions,
          <span class="hljs-attr">DietHistory</span>: newcombinedDietHistory,
          <span class="hljs-attr">pendingChanges</span>: <span class="hljs-literal">false</span>,
        }), () =&gt; {
          resolve();
        });
      });
    });
  }

  render() {
    <span class="hljs-keyword">const</span> { classes } = <span class="hljs-keyword">this</span>.props;

    <span class="hljs-keyword">return</span> (
      &lt;div
        style={{
          display: 'flex',
          flexDirection: 'column',
          justifyContent: 'center',
        }}
      &gt;
        &lt;Card className={classes.card}&gt;
          &lt;div style={{ display: 'flex' }}&gt;
            &lt;span style={{ alignItems: 'center', display: 'flex' }}&gt;
              &lt;Typography inline variant="h3" style={{ paddingRight: this.state.selectedDiet ? '12px' : '0px' }} color="textSecondary"&gt;
                {this.state.selectedDiet ? this.state.selectedDiet.dietId : ''}
              &lt;/Typography&gt;
              &lt;Button
                onClick={() =&gt; this.setState({ dietSelectDialogOpen: true, newDietOpen: false })}
                color="secondary"
                variant="contained"
              &gt;
                Select Diet
              &lt;/Button&gt;
              &lt;Button
                onClick={() =&gt; {
                  this.setState({
                    newDietOpen: true,
                    selectedDiet: null,
                  }, () =&gt; {
                    const href = '/diet?id=new';
                    Router.push(href, href, { shallow: true });
                  });
                }}
                color="secondary"
                variant="outlined"
                className={classes.newDietButton}
                disabled={this.state.editDisabled}
              &gt;
                New Diet
              &lt;/Button&gt;
              {this.state.selectedDiet &amp;&amp;
                &lt;Button
                  className={classes.newDietButton}
                  onClick={async () =&gt; {
                    if (this.state.selectedDiet) {
                      const { dietId } = this.state.selectedDiet;
                      await this.clientDietAPI.downloadDietAnalysis(dietId);
                    }
                  }}
                  color="primary"
                  variant="contained"
                &gt;
                  Download Diet Analysis
                &lt;/Button&gt;
              }
            &lt;/span&gt;
            &lt;span
              style={{
                display: 'flex',
                alignItems: 'center',
                flexGrow: 1,
                justifyContent: 'flex-end',
              }}
            &gt;
              {this.state.selectedDiet &amp;&amp; (
                &lt;Button
                  onClick={() =&gt; this.setState({ dietDeleteDialogOpen: true })}
                  variant="contained"
                  className={classNames(classes.newDietButton, classes.deleteDietButton)}
                  disabled={this.state.editDisabled}
                &gt;
                  Delete
                &lt;/Button&gt;
              )}
            &lt;/span&gt;
          &lt;/div&gt;
          {(this.state.selectedDiet || this.state.newDietOpen) &amp;&amp; (
            &lt;DietForm
              {...this.state.selectedDiet}
              speciesCodes={this.state.speciesCodeOptions}
              tableCodes={this.state.tableCodeOptions}
              deliveryContainerCodes={this.state.deliveryContainerCodeOptions}
              groupDietCodes={this.state.groupDietCodeOptions}
              submitForm={(payload) =&gt; {
                if (!this.state.newDietOpen) {
                  this.setState({
                    dietUpdatePayload: { ...payload },
                    dietChangeDialogOpen: true,
                    dialogChangeNotes: '',
                  });
                  return Promise.resolve();
                }
                return this.handleDietCreate(payload);
              }}
              submitButtonText={this.state.newDietOpen ? 'Save New Diet' : 'Save Diet Changes'}
              editDisabled={this.state.editDisabled}
            /&gt;
          )}
        &lt;/Card&gt;
        &lt;DietSelect
          open={this.state.dietSelectDialogOpen}
          diets={this.state.Diets}
          deliveryContainers={this.props.DeliveryContainers}
          species={this.props.Species}
          onCancel={() =&gt; this.setState({ dietSelectDialogOpen: false })}
          onSave={(diet) =&gt; this.setState({
            selectedDiet: diet,
            numAnimals: diet.numAnimals,
            dietSelectDialogOpen: false,
          }, () =&gt; {
            const href = `/diet?id=${diet.dietId}`;
            Router.push(href, href, { shallow: true });</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>set loading to true, and load all dependent info from API</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span> }, () =&gt; {
              <span class="hljs-keyword">this</span>.grabDietRelatedRecords(diet).then(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
                <span class="hljs-keyword">this</span>.setState({
                  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
                  <span class="hljs-attr">CaseNotes</span>: results.matchedCaseNotes || [],
                  <span class="hljs-attr">DietChanges</span>: results.matchedDietChanges || [],
                  <span class="hljs-attr">DietHistory</span>: results.matchedDietHistory || [],
                  <span class="hljs-attr">DietHistoryOptions</span>: results.matchedDietHistory.filter(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> results.matchedDietHistory.findIndex(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> el.startId === item.startId) &gt;= index).map(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> ({
                    <span class="hljs-attr">text</span>: moment(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(el.startId)).format(<span class="hljs-string">'MM-DD-YYYY h:mm A'</span>),
                    <span class="hljs-attr">id</span>: el.startId,
                  })).reverse() || [],
                  <span class="hljs-attr">DietPlans</span>: results.matchedDietPlans || [],
                  <span class="hljs-attr">oldDietPlan</span>: results.matchedDietPlans || [],
                  <span class="hljs-attr">PrepNotes</span>: results.matchedPrepNotes || [],
                });
              }, (reason) =&gt; {
                <span class="hljs-built_in">console</span>.error(reason);
                <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> });
              });
            });
          })
          }
        /&gt;
        {<span class="hljs-keyword">this</span>.state.loading &amp;&amp;
          &lt;LinearProgress /&gt;
        }
        {this.state.selectedDiet &amp;&amp; !this.state.loading &amp;&amp;
          &lt;Card className={classes.dietPlanCard}&gt;
            &lt;Grid container&gt;
              &lt;Grid item xs={12} sm={2}&gt;
                &lt;DietHistoryList
                  currentClick={() =&gt; {
                    this.setState({ viewCurrentDietPlan: true, currentHistory: null });
                  }}
                  historyClick={(id) =&gt; {
                    this.setState((prevState) =&gt; ({
                      viewCurrentDietPlan: false,
                      currentHistory: id,
                      selectedDietHistories: prevState.DietHistory.filter((historyRecord) =&gt; {
                        if (historyRecord.startId !== id) return false;
                        return true;
                      }),
                    }));
                  }}
                  history={this.state.DietHistoryOptions}
                  currentSelected={this.state.viewCurrentDietPlan}
                  selectedHistory={this.state.currentHistory}
                /&gt;
              &lt;/Grid&gt;
              &lt;Grid item xs={12} sm={10}&gt;
                {this.state.viewCurrentDietPlan &amp;&amp;
                  &lt;div&gt;
                    &lt;CurrentDietTable
                      ref={this.currentDietRef}
                      allFoods={this.props.Foods}
                      allUnits={this.props.Units}
                      dietPlan={this.state.DietPlans}
                      currentDiet={this.state.selectedDiet}
                      onSave={(deletedDietPlans) =&gt; {
                        this.setState({
                          deletedDietPlans,
                          dietPlanChangeDialogOpen: true, // open diet plan specific changelog dialog
                          dialogChangeNotes: '', // reset if not blank from a previous change
                        }, () =&gt; {
                          this.currentDietRef.current.setState({ isLoading: false });
                        });
                      }}
                      showNotification={(type, message) =&gt; this.notificationBar.current.showNotification(type, message)}
                      numAnimals={this.state.numAnimals}
                      onDietPlanAdd={(newRow) =&gt; this.handleDietPlanAdd(newRow)}
                      onDietPlanUpdate={(updatedValues, id) =&gt; this.handleDietPlanUpdate(updatedValues, id)}
                      onDietPlanDelete={(oldRow) =&gt; this.handleDietPlanDelete(oldRow)}
                      onNumAnimalsChange={(newNumber) =&gt; this.handleNumAnimalsChange(newNumber)}
                      pendingChanges={this.state.pendingChanges}
                      editDisabled={this.state.editDisabled}
                    /&gt;
                  &lt;/div&gt;
                }
                {!this.state.viewCurrentDietPlan &amp;&amp;
                  &lt;div&gt;
                    &lt;DietHistoryTable
                      dietHistory={this.state.selectedDietHistories}
                      allFoods={this.props.Foods}
                      allUnits={this.props.Units}
                      currentHistoryTime={this.state.currentHistory}
                    /&gt;
                    {this.state.DietChanges
                      .reverse()
                      .filter((dietChange) =&gt; this.state.currentHistory === dietChange.dietChangeDate)
                      .map(value =&gt; (
                        &lt;DietChangeCard
                          key={value.dietChangeId}
                          {...value}
                          AllUsers={this.props.Users}
                        /&gt;
                      ))}
                  &lt;/div&gt;
                }
              &lt;/Grid&gt;
            &lt;/Grid&gt;
          &lt;/Card&gt;
        }
        {this.state.selectedDiet &amp;&amp; !this.state.loading &amp;&amp;
          &lt;Grid container&gt;
            &lt;Grid item xs={12} md={6}&gt;
              &lt;Card className={classes.card}&gt;
                &lt;Typography
                  variant="h4"
                  color="textSecondary"
                &gt;Case Notes
                &lt;/Typography&gt;
                &lt;CaseNotesForm
                  {...this.state.selectedCaseNote}
                  submitForm={(payload) =&gt; {
                    if (!this.state.selectedCaseNote) {
                      return this.handleCaseNoteCreate(payload);
                    }
                    return this.handleCaseNoteChange(payload);
                  }}
                  submitButtonText={this.state.selectedCaseNote ? 'Submit Case Note Change' : 'Submit New Case Note'}
                  editDisabled={this.state.editDisabled}
                /&gt;
                {this.state.selectedCaseNote &amp;&amp;
                  &lt;Button
                    type="submit"
                    variant="contained"
                    color="secondary"
                    fullWidth
                    onClick={() =&gt; { this.setState({ selectedCaseNote: null }); }}
                  &gt;
                    Cancel
                  &lt;/Button&gt;
                }

                &lt;List className={classes.overflowList}&gt;
                  {this.state.CaseNotes.map(value =&gt; (
                    &lt;div key={value.caseNotesId}&gt;
                      &lt;ListItem&gt;
                        {/* add extra padding around the second action since it's not fully supported */}
                        &lt;ListItemText
                          style={{ paddingRight: '32px' }}
                          secondary={`BCS: ${value.bcs}  |  Date: ${moment(new Date(value.caseDate)).format('MM-DD-YYYY h:mm A')}`}
                        &gt;
                          {value.caseNote}
                        &lt;/ListItemText&gt;
                        &lt;ListItemSecondaryAction&gt;
                          &lt;IconButton
                            onClick={() =&gt; {
                              this.setState({ selectedCaseNote: { ...value } });
                            }}
                            disabled={this.state.editDisabled}
                          &gt;
                            &lt;Edit /&gt;
                          &lt;/IconButton&gt;
                          &lt;IconButton
                            onClick={() =&gt; {
                              this.handleCaseNoteDelete(value);
                            }}
                            disabled={this.state.editDisabled}
                          &gt;
                            &lt;Delete /&gt;
                          &lt;/IconButton&gt;
                        &lt;/ListItemSecondaryAction&gt;
                      &lt;/ListItem&gt;
                      &lt;Divider light /&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/List&gt;
              &lt;/Card&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} md={6}&gt;
              &lt;Card className={classes.card}&gt;
                &lt;Typography
                  variant="h4"
                  color="textSecondary"
                &gt;Prep Notes
                &lt;/Typography&gt;
                &lt;PrepNotesForm
                  {...this.state.selectedPrepNote}
                  submitForm={(payload) =&gt; {
                    if (!this.state.selectedPrepNote) {
                      return this.handlePrepNotesCreate(payload);
                    }
                    return this.handlePrepNoteChange(payload);
                  }}
                  submitButtonText={this.state.selectedPrepNote ? 'Submit Prep Note Change' : 'Submit New Prep Note'}
                  editDisabled={this.state.editDisabled}
                /&gt;
                {this.state.selectedPrepNote &amp;&amp;
                  &lt;Button
                    type="submit"
                    variant="contained"
                    color="secondary"
                    fullWidth
                    onClick={() =&gt; { this.setState({ selectedPrepNote: null }); }}
                  &gt;
                    Cancel
                  &lt;/Button&gt;
                }

                &lt;List className={classes.overflowList}&gt;
                  {this.state.PrepNotes.map(value =&gt; (
                    &lt;div key={value.prepNoteId}&gt;
                      &lt;ListItem&gt;
                        {/* add extra padding around the second action since it's not fully supported */}
                        &lt;ListItemText style={{ paddingRight: '32px' }}&gt;
                          {value.prepNote}
                        &lt;/ListItemText&gt;
                        &lt;ListItemSecondaryAction&gt;
                          &lt;IconButton
                            onClick={() =&gt; {
                              this.setState({ selectedPrepNote: { ...value } });
                            }}
                            disabled={this.state.editDisabled}
                          &gt;
                            &lt;Edit /&gt;
                          &lt;/IconButton&gt;
                          &lt;IconButton
                            onClick={() =&gt; {
                              this.handlePrepNoteDelete(value);
                            }}
                            disabled={this.state.editDisabled}
                          &gt;
                            &lt;Delete /&gt;
                          &lt;/IconButton&gt;
                        &lt;/ListItemSecondaryAction&gt;
                      &lt;/ListItem&gt;
                      &lt;Divider light /&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/List&gt;
              &lt;/Card&gt;
            &lt;/Grid&gt;
          &lt;/Grid&gt;
        }
        {this.state.selectedDiet &amp;&amp; !this.state.loading &amp;&amp;
          &lt;Grid container&gt;
            &lt;Grid item xs={12} md={6}&gt;
              &lt;Card className={classes.card}&gt;
                &lt;Typography
                  variant="h4"
                  color="textSecondary"
                &gt;Diet Changes
                &lt;/Typography&gt;
                &lt;List className={classes.overflowList}&gt;
                  {this.state.DietChanges.reverse().map(value =&gt; (
                    &lt;DietChangeCard
                      key={value.dietChangeId}
                      {...value}
                      AllUsers={this.props.Users}
                    /&gt;
                  ))}
                &lt;/List&gt;
              &lt;/Card&gt;
            &lt;/Grid&gt;
          &lt;/Grid&gt;
        }
        &lt;Notifications ref={this.notificationBar} /&gt;
        &lt;ConfirmationDialog
          cancelButtonText="Cancel"
          title="Are you sure you want to delete this diet?"
          message="NOTE: This action will delete all related case notes, prep notes, diet history, diet plan records, and is irreversible."
          open={this.state.dietDeleteDialogOpen}
          onClose={(notCancelled) =&gt; {
            this.setState({ dietDeleteDialogOpen: false }, () =&gt; {
              if (notCancelled) {
                this.handleDietDelete();
              }
            });
          }}
          okButtonText="OK"
        /&gt;
        &lt;DietPlanChangeDialog
          open={this.state.dietPlanChangeDialogOpen}
          defaultChangeNotes={this.state.dialogChangeNotes}
          onCancel={() =&gt; {
            this.setState({
              dietPlanChangeDialogOpen: false,
              dialogChangeNotes: '',
            }, () =&gt; {
              this.notificationBar.current.showNotification('warning', 'Changes are still pending! Navigating away from page will not save changes.');
              this.currentDietRef.current.setState({
                isLoading: false,
              });
            });
          }}
          onSave={(changeNotes) =&gt; {
            this.setState({ dietPlanChangeDialogOpen: false, dialogChangeNotes: changeNotes }, () =&gt; {
              this.handleDietPlanSave().catch((err) =&gt; {
                console.error(err);
              }).then(() =&gt; {
                this.currentDietRef.current.setState({
                  isLoading: false,
                });
              });
            });
          }}
        /&gt;
        &lt;DietPlanChangeDialog
          open={this.state.dietChangeDialogOpen}
          defaultChangeNotes={this.state.dialogChangeNotes}
          onCancel={() =&gt; {
            this.setState({
              dietChangeDialogOpen: false,
              dialogChangeNotes: '',
            }, () =&gt; {
              this.notificationBar.current.showNotification('warning', 'Changes are still pending! Navigating away from page will not save changes.');
            });
          }}
          onSave={(changeNotes) =&gt; {
            this.setState({ dietChangeDialogOpen: false, dialogChangeNotes: changeNotes }, () =&gt; {
              this.handleDietUpdate().catch((err) =&gt; {
                console.error(err);
              });
            });
          }}
        /&gt;
      &lt;/div&gt;
    );
  }
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
